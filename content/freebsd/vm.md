---
title: "BSD Hypervisors"
date: 2017-11-09T11:14:54+09:00
tags: ["bhyve","vmm"]
draft: false
---
잘 알려진 VMWare나 VirtualBox외에 자체적인 Hypervisor를 사용하면 보다 쉽게 가상화를 할 수 있습니다.

<!--more-->

일부 기능은 무료로 배포되고 사용된다 하지만 VMWare는 어디까지나 상용이니 논외로 두고, VirtualBox도 불편함이 없을만큼 좋은 Hypervisor임에 틀림이 없습니다. 무엇보다도 무료이면서 다양한 호스트 OS에서 게스트를 둘수 있다는 점이 그렇습니다.

그렇지만 BSD를 사용하다 보면, VirtualBox도 약간은 불편한점이 있기는 합니다. FreeBSD에서는 커널 모듈을 올리면 사용가능하지만 OpenBSD에서는 지원하지 않고, VirtualBox의 네트워크를 Bridge로 두어도 호스트와 네트워크 통신을 하려면 인터넷 공유기와 같은 라우터가 필요합니다. 물론, 그렇게 하지 않아도 되는 방법도 찾으면 있겠지만 많이 번거로울것 같습니다.

반면, FreeBSD의 [bhyve](bhyve.org)나 OpenBSD의 [vmm](https://man.openbsd.org/vmm)을 사용하면 호스트를 인터넷 공유기처럼 구성하고 게스트를 붙일 수 있습니다. 그리하면 외부기기 없이도 호스트와 게스트 사이에 네트워크 통신이 자유롭고, 호스트에 외부 연결이 있을 때에는 게스트에서도 자유롭게 인터넷에 연결 할 수 있도록 할 수 있습니다.

자체 Hypervisor인 만큼 리소스도 적게 사용하기 때문에 호스트를 부팅하면서 게스트도 자동으로 부팅시키도록 FreeBSD에서는 rc.local을, OpenBSD에서는 vm.conf파일을 이용해서 구성해 두면 언제든지 가상환경에서 서버를 구성하고 테스트 할 수 있으며 이미 deploy시킨 시스템의 백업 이미지를 두어 업데이트 또는 업그레이드 이후 시스템이 정상적으로 동작하는지 충분히 테스트 한 후에 실제 작업을 진행하도록 할 수 있습니다.
